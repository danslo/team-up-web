div(ng-controller='team as team', style='padding-top: 1px;')
	.page-header
		h2.nullable {{ui.teamup.teams}}
		.selectGroup(ng-if='team.list.length > 1')
			span.selectTitles
				strong
					| {{ ui.teamup.selectTeam }}
			select(ng-model='team.current.teamId',
			ng-options='t.uuid as t.name for t in team.list | orderBy:"name"',
			ng-selected='team.current.teamId',
			ng-change='team.init(team.current.teamId)')
		
	.teams-section.tabbable.tabs-left
		ul.nav.nav-tabs.nav-tabs-app(style='margin-right: 0px;', bs-navbar)
			include ../teams/tabs
		.tab-content
			#newMemberTab.tab-pane(class="active")
				.tab-header
					h3.pull-left {{ui.teamup.newMember}}
				hr
				form.new-member-form(name='member.newForm', novalidate)
					fieldset
						.row
							.span6
								fieldset
								
									.form-group(
										ng-class="{ 'has-error' : (member.newForm.firstname.$dirty || member.newForm.$submitted || member.newForm.reTypePassword.$touched) && member.newForm.firstname.$invalid }")
										label.control-label {{ui.profile.firstName}}
										.controls
											input.span3.form-control(type='text',
												name='firstname',
												ng-model='member.form.firstName',
												required='',
												ng-minlength="5"
												ng-maxlength="20")
											span.help-block(ng-if="(member.newForm.firstname.$touched || member.newForm.firstname.$dirty || member.newForm.$submitted) && member.newForm.firstname.$invalid",
												ng-messages="member.newForm.firstname.$error")
												small(ng-message="required")
													i Your name is required.
												small(ng-message="minlength")
													i Your name is too short.
												small(ng-message="maxlength")
													i Your name is too short.
										
									.form-group
										label.control-label {{ui.profile.lastName}}
										.controls
											input.span3.form-control(type='text',
												ng-model='member.form.lastName')
											
									.form-group(ng-if='member.roles.length > 1',
										ng-class="{ 'has-error' : (member.newForm.role.$touched || member.newForm.role.$dirty || member.newForm.$submitted) && !member.form.role}")
										label.control-label {{ui.teamup.role}}
										.controls
											select.span3.form-control(ng-model='member.form.role',
												required='',
												name='role',
												ng-options='r.id as r.label for r in member.roles')
												option(value='') {{ui.teamup.chooseRole}}
											span.help-block(ng-if="(member.newForm.role.$touched || member.newForm.role.$dirty || member.newForm.$submitted) && !member.form.role")
												small
													i Yeeeeyyy
												
									.form-group(ng-class="{ 'has-error' : (member.newForm.email.$touched || member.newForm.email.$dirty || member.newForm.$submitted) && member.newForm.email.$invalid }")
										label.control-label {{ ui.profile.email }}
										.controls
											input.span3.form-control(type='email',
											name='email',
											required,
											ng-model='member.form.email',
											ng-pattern=/^([A-z0-9-]+(?:\.[A-z0-9-]+)*)@((?:[A-z0-9-]+\.)*[A-z0-9-]{1,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i)
											span.help-block(ng-show='(member.newForm.email.$touched || member.newForm.email.$dirty || member.newForm.$submitted) && member.newForm.email.$invalid')
												small
													i {{ ui.validation.email.notValid }}
		
									.form-group(ng-class="{'has-error': (member.newForm.phone.$touched || member.newForm.phone.$dirty || member.newForm.$submitted) && (! phoneNumberParsed.result || (phoneNumberParsed.all && phoneNumberParsed.all.error))}")
										label.control-label {{ui.teamup.phone}}
										.controls
											input.span3.form-control.inputPhoneNumber(type='text',
												name='phone',
												required,
												ng-model='member.form.phone',
												ng-change='parsePhoneNumber(member.form.phone)')
											span.help-block
												small(ng-if='phoneNumberParsed.message')
													i {{ phoneNumberParsed.message }}
												small(ng-if='(!phoneNumberParsed.message) && (member.newForm.phone.$touched || member.newForm.phone.$dirty || member.newForm.$submitted)')
													i {{ ui.validation.phone.notValid }}
							.span6
								fieldset
									.form-group(
									ng-class="{'has-error' : (member.UserNameWrong || ! member.form.userName || member.form.userName.length < 4) && (member.newForm.username.$touched || member.newForm.username.$dirty || member.newForm.$submitted)}")
										label.control-label {{ui.profile.username}}
										.controls
											input.span3.form-control(type='text', 
												name='username'
												ng-change="member.checkUserName()", 
												ng-blur='member.UserNameWrong=false',
												ng-model='member.form.userName',
												required)
										p.text-danger
											small(ng-show='(member.UserNameWrong || ! member.form.userName || member.form.userName.length < 4) && (member.newForm.username.$touched || member.newForm.username.$dirty || member.newForm.$submitted)')
												i {{ ui.validation.userName.valid }} {{ ui.validation.userName.amountMinChars(4) }} {{ui.validation.userName.regex }}
									.form-group(ng-class="{ 'has-error' : member.newForm.password.$invalid && (member.newForm.password.$touched || member.newForm.password.$dirty || member.newForm.$submitted)  }")
										label.control-label {{ui.profile.password}}
										.controls
											input.span3.form-control(type='password',
											ng-model='member.form.password',
											name='password',
											required,
											ng-minlength="8",
											ng-maxlength="20")
											span.help-block(ng-show='member.newForm.password.$invalid && (member.newForm.password.$touched || member.newForm.password.$dirty || member.newForm.$submitted)')
												small
													i
													| {{ ui.validation.password.required }}
												small(ng-show="member.newForm.password.$error.minlength")
													i
													| {{ ui.validation.password.amountMinChars(8) }} 
												small(ng-show="member.newForm.password.$error.maxlength")
													i
													| {{ ui.validation.password.amountMaxChars(20) }}
												
									.form-group(
										ng-class="{ 'has-error' : (member.form.reTypePassword !== member.form.password) && member.newForm.reTypePassword.$dirty || member.newForm.reTypePassword.$touched  ||  member.newForm.$submitted }")
										label.control-label {{ui.profile.retypePassword}}
										.controls
											input.span3.form-control(type='password',
												required='',
												ng-model='member.form.reTypePassword', name='reTypePassword')
											span.help-block(ng-show='(member.form.reTypePassword !== member.form.password) && member.newForm.reTypePassword.$dirty || member.newForm.reTypePassword.$touched  ||  member.newForm.$submitted')
												small
													i
													| {{ ui.teamup.passNotSame }}
						.form-actions
							button.btn.btn-success(type='submit',
							ng-click='member.create(member.form, team.current.teamId)') {{ui.teamup.saveMember}}